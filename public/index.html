<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>우리가 우연히 살아남은 1년 그 이후</title>
    <meta property="og:url"                content="https://remember-160517.com/" />
    <meta property="og:type"               content="website" />
    <meta property="og:title"              content="우리가 우연히 살아남은 1년 그 이후" />
    <meta property="og:description"        content="16년 5월 17일 강남역 여성살해사건 1주기를 추모하는 공간입니다" />
    <meta property="og:image"              content="https://pbs.twimg.com/profile_images/835431700448452608/KnAWOGgR.jpg" />
    <meta property="fb:app_id" content="1409770342400157" />


    <!-- https://goo.gl/FY4AYK -->

    <!-- update the version number as needed -->
    <script defer src="/__/firebase/3.9.0/firebase-app.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/3.9.0/firebase-auth.js"></script>
    <script defer src="/__/firebase/3.9.0/firebase-database.js"></script>
    <script defer src="/__/firebase/3.9.0/firebase-messaging.js"></script>
    <script defer src="/__/firebase/3.9.0/firebase-storage.js"></script>
    <!-- initialize the SDK after all desired features are loaded -->
    <script defer src="/__/firebase/init.js"></script>

    <script
      src="https://code.jquery.com/jquery-3.2.1.min.js"
      integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
      crossorigin="anonymous"></script>

    <script src="https://unpkg.com/vue"></script>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <style media="screen">
      body { background: #fcfcfc; color: rgba(0,0,0,0.87); font-family: Roboto, Helvetica, Arial, sans-serif; margin: 0; padding: 0; }
      #top-back {
        height: 450px;
        position: relative;
        background-color: #363a3c;
        left: 0px;
        top: 0px;
        width: 100%;
      }
      #main-contents {
        position: relative;
        top: -450px;
      }
      #ribbon { 
        max-width: 720px; 
        margin: 120px auto 50px;
        padding: 40px 24px; 
        background: url("./image/ribbon.png") no-repeat center;
      }
      #comment { 
        background: white; 
        max-width: 720px; 
        margin: 0px auto 16px;
        padding: 50px; 
        border-radius: 0px; 
        color: #363a3c;
      }
      #comment h2 { color: #ffa100; font-weight: bold; font-size: 16px; margin: 0 0 8px; }
      #comment h1 { 
        font-size: 32px; 
        font-weight: 900; 
        color: #363a3c; 
        margin: 0 0 16px;
        letter-spacing: -2px
      }
      #comment .pin {
        width: 20px;
        margin-right: 10px;
      }
      #comment p { 
        line-height: 26px; 
        margin: 16px 0 24px; 
        font-size: 14px; 
      }
      #comment a.comment-submit-btn{ display: block; text-align: center; background: #363a3c; text-transform: uppercase; text-decoration: none; color: white; padding: 16px; border-radius: 0px; }
      #comment { 
        /*box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24); */
        box-shadow: 0 20px 20px rgba(0,0,0,.1);
      }
      #comment p.addition-text {
        font-size:12px;
        line-height: 22px;
      }
      .before-login, .after-login {
        margin-left: auto;
      }
      .before-login .facebook-login-button {
        background-color: rgb(59, 89, 152);
        color: white;
      }
      .before-login .twitter-login-button {
        background-color: rgb(51, 204, 255);
        color: white;
      }
      #load { color: rgba(0,0,0,0.4); text-align: center; font-size: 13px; }
      @media (max-width: 600px) {
        body, #comment { margin-top: 0; background: white; box-shadow: none; }
      }
      
      #top-nav { 
        display: flex;
        max-width: 720px; 
        margin: 12px auto 12px; 
        padding: 0px 0px;
      }
      #top-nav .user-image { width: 30px; }
      #top-nav .after-login {
        -webkit-transform-style: preserve-3d;
        -moz-transform-style: preserve-3d;
        transform-style: preserve-3d;
      }
      #top-nav .after-login .user-name {
        position: relative;
        top: 50%;
        transform: translateY(-50%);
        padding-right: 20px;
        color: #fcfcfc;
      }
      #top-nav .after-login .float {
        float: left;
      }
      #top-nav .after-login .logout-button { 
        background-color: #fcfcfc;
        border-color: #999999;
      }
      #comment-lists { 
        column-width: 250px;
        column-gap: 15px;
        width: 90%;
        max-width: 1100px;
        margin: 50px auto;
      }
      @font-face {
        font-family: SDMiSaeng;
        src: url(font/SDMiSaeng.ttf);
      }
      #comment-lists li { 
        background:#ffc; 
        /*border: 2px solid #ffc;*/
        /*box-shadow: 0 1px 2px rgba(34, 25, 25, 0.4);*/
        box-shadow: 0 10px 10px rgba(0,0,0,.1);
        margin: 25px 2px 25px;
        padding: 15px;
        padding-bottom: 10px;
        transition: opacity .4s ease-in-out;
        display: inline-block;
        column-break-inside: avoid;
        min-width: 110px;
      }
      @media (max-width: 600px) {
        #comment-lists li { 
          margin:-3px;
        }
      }

      #comment-lists li .comment-div {
        position: relative;
        height: 100%;
        text-align: left;
      }

      #comment-lists li a {
        color: #666666;
      }
      
      #comment-lists li .data-comment {
        word-break: break-all;
        font-family: SDMiSaeng;
        font-size: 20px;
        margin-bottom: 63px;
      }
      #comment-lists li:nth-child(even){
        -o-transform:rotate(4deg);
        -webkit-transform:rotate(4deg);
        -moz-transform:rotate(4deg);
        position:relative;
        top:5px;
        background:#cfc;
      }
      #comment-lists li:nth-child(3n){
        -o-transform:rotate(-3deg);
        -webkit-transform:rotate(-3deg);
        -moz-transform:rotate(-3deg);
        position:relative;
        top:-5px;
        background:#ccf;
      }

/*      #comment-lists li:hover,#comment-lists li:focus{
        -moz-box-shadow:10px 10px 7px rgba(0,0,0,.7);
        -webkit-box-shadow: 10px 10px 7px rgba(0,0,0,.7);
        box-shadow:10px 10px 7px rgba(0,0,0,.7);
        -webkit-transform: scale(1.25);
        -moz-transform: scale(1.25);
        -o-transform: scale(1.25);
        position:relative;
        z-index:5;
      } */

      #comment-lists li .data-datetime {
        position: absolute;
        bottom: 0; 
        width: 100%; 
        height: 51px; 
        font-size: 10px
      }
      #comment-lists li .data-share {
        position: absolute;
        bottom: 0; 
        width: 100%; 
        height: 31px; 
      }
      #comment-lists li .share-btn-item {
        margin-left: -13px;
        float: right;
      }
      
      #comment-lists img { width: 50px; }
      #more { 
        max-width: 720px; 
        margin: 12px auto 12px;
        padding: 0px 50px; 
      }
      #more a{ 
        display: block; 
        text-align: center; 
        background: white; 
        text-transform: uppercase; 
        text-decoration: none; 
        color: #363a3c; 
        border-color: #363a3c;
        padding: 16px; 
        border-radius: 0px; 
      }

      .submit-result {
        text-align: center;
        margin-bottom: 16px;
        padding: 16px 10px;
        color: rgb(60, 118, 61);
        background-color: rgb(223, 240, 216);
      }
      .submit-result-fail {
        text-align: center;
        margin-bottom: 16px;
        padding: 16px 10px;
        color: rgb(169, 68, 66);
        background-color: rgb(242, 222, 222);
      }
    </style>
  </head>
  <body>
    <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '1409770342400157',
          xfbml      : true,
          version    : 'v2.9'
        });
        FB.AppEvents.logPageView();
      };

      (function(d, s, id){
         var js, fjs = d.getElementsByTagName(s)[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement(s); js.id = id;
         js.src = "//connect.facebook.net/en_US/sdk.js";
         fjs.parentNode.insertBefore(js, fjs);
       }(document, 'script', 'facebook-jssdk'));
    </script>
    <div id="top-back">
    </div>
    <div id="main-contents">
      <div id="top-nav">
        <div v-if="fbuser != null" class="after-login">
          <div class="user-name float">{{ fbuser.displayName }} 님</div>
  <!--         <div class="float">
            <img v-bind:src="fbuser.photoURL" class="user-image"></img>
          </div> -->
          <div class="float">
            <button class="logout-button btn" v-on:click="logout()"> logout</button>
          </div>
        </div>
        <div v-else class="before-login">
          <button class="facebook-login-button btn float" v-on:click="loginFacebook()">
            <i class="fa fa-facebook-official" aria-hidden="true"></i> facebook 로그인
          </button>
          <button class="twitter-login-button btn" v-on:click="loginTwitter()">
            <i class="fa fa-twitter" aria-hidden="true"></i> twitter 로그인
          </button>
        </div>
      </div>
      <div id="ribbon">

      </div>
      <div id="comment">
        <!-- <h2>테크페미</h2> -->
        <h1><strong>우리가 우연히 살아남은 1년 그 이후</strong></h1>
        <p>
        강남역 여성살해사건 이후 1년이 지났습니다. <br>
        당시 강남역 10번 출구 인근에서는 많은 사람이 익명으로 포스트잇을 작성하여 젠더폭력에 대한 자신의 경험을 전했습니다. 
        우리는 서로의 경험에 공감하기도 하고 함께 분노하기도 했으며 이를 계기로 페미니스트로서의 자신을 발견하기도 했습니다.
        <a href="https://twitter.com/techfemi" target="_blank">테크페미</a>는 다시금 추모의 시간을 가지고 사건 이후 우리 모두 어떻게 '살아 남았는지' 에 대해 이야기 하고자 공간을 만들게 되었습니다.
        문제가 있거나 궁금하신 점은 <a href="mailto:techfemi.kr@gmail.com">techfemi.kr@gmail.com</a>으로 문의 바랍니다.<br>

        </p>
        <p class="addition-text">
        <strong>
        <img class="pin" src="https://abs.twimg.com/emoji/v1/72x72/1f4cc.png">알려드립니다<br>
      
        </strong>
        <strong>1. 게시물 관리정책</strong><br>
        장애, 성별, 국적, 인종이나 민족, 종교, 성적 지향에 대한 비방 및 혐오와 욕설을 포함함 메세지는 <br>관리자에 의해 임의로 삭제됩니다. <br>
        해당 메세지의 작성자는 향후 메세지를 작성할 수 없을 수도 있습니다.<br>
        <strong>2. 개인정보처리방침</strong><br>
        추모 메세지를 작성하시면 아래 개인정보의 수집 및 이용에 동의하신 것으로 간주합니다.<br>
         - 개인정보 수집항목<br>
            [페이스북 계정으로 로그인 시] 이메일, 이름, 서비스 이용기록(방문일시)<br>
            [트위터로 계정으로 로그인 시] 이메일, 닉네임, 서비스 이용기록(방문일시)<br>
         - 개인정보 수집목적: 로그인 기반 메세지 작성 서비스 제공 및 고객대응<br>
         - 개인정보 보유 및 이용기간: 목적 달성 후 지체없이 파기<br>
        <br>
        </p>
        <input type="text" class="input-comment form-control" maxlength="140">
        <hr>
        <div>
          <div class="submit-result" style="opacity: -0.1; display: none;">
            등록되었습니다
          </div>
          <div class="submit-result-fail" style="opacity: -0.1; display: none;">
            <button type="button" class="close" onclick="hideMessage()" aria-label="Close">
                <span aria-hidden="true">×</span>
            </button>
            <span class="result-fail-message"></span>
          </div>
        </div>
        <a href="" class="comment-submit-btn btn btn-large">전송</a>
      </div>
      <div id="">
        <ul id="comment-lists">
          <li v-for="data in datas">
            <div class="comment-div">
              <div class="data-comment">{{ data.comment }}
              </div>
              <div class="data-datetime">
                {{ data.datetime }}
              </div>
              <div class="data-share">
                <div v-if="fbuser != null && fbuser.uid == data.uid" class="delete-btn share-btn-item" style="float: left;">
                  <a class="comment-delete-button btn" v-on:click="deleteComment(data.key)">
                    <i class="fa fa-trash-o" aria-hidden="true"></i>
                  </a>
                </div>
                <div class="share-btn-item">
                  <a class="facebook-share-button btn" v-on:click="shareFacebook(data.comment)">
                    <i class="fa fa-facebook-official" aria-hidden="true"></i>
                  </a>
                </div>
                <div class="share-btn-item">
                  <a class="twitter-share-button btn" v-bind:href="'http://twitter.com/share?url=https://remember-160517.com/&text='+data.comment" target="_blank">
                    <i class="fa fa-twitter" aria-hidden="true"></i>
                  </a>
                </div>
              </div>
          </li>
        </ul>
      </div>
      <div id="more">
        <a href="" class="more-btn btn btn-large">더보기</a>
      </div>
    </div>

    <script>
      const requestCount = 15;
      let datas = [];
      let blockUsers = [];
      let fbuser = null;
      let vue1, vue2;

      document.addEventListener('DOMContentLoaded', function() {
        // // 🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥
        // // The Firebase SDK is initialized and available here!
        //
        // firebase.auth().onAuthStateChanged(user => { });
        // firebase.database().ref('/path/to/ref').on('data', snapshot => { });
        // firebase.messaging().requestPermission().then(() => { });
        // firebase.storage().ref('/path/to/ref').getDownloadURL().then(() => { });
        //
        // // 🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥

        try {
          let app = firebase.app();
          let features = ['auth', 'database', 'messaging', 'storage'].filter(feature => typeof app[feature] === 'function');
          //document.getElementById('load').innerHTML = `Firebase SDK loaded with ${features.join(', ')}`;
        } catch (e) {
          console.error(e);
          //document.getElementById('load').innerHTML = 'Error loading the Firebase SDK, check the console.';
        }
        
        // document.getElementsByClassName('twitter-login-button')[0].addEventListener('click', function(event) {
        //   event.preventDefault();
        //   console.log('click twitter-login-button');
        //   loginTwitter();
        // });
   
        // document.getElementsByClassName('logout-button')[0].addEventListener('click', function(event) {
        //   event.preventDefault();
        //   console.log('click logout-button');
        //   logout();
        // });

        // document.getElementsByClassName('facebook-login-button')[0].addEventListener('click', function(event) {
        //   event.preventDefault();
        //   console.log('click facebook-login-button');
        //   loginFacebook();
        // });

        document.getElementsByClassName('comment-submit-btn')[0].addEventListener('click', function(event) {
          event.preventDefault();
          console.log('click comment-submit-btn');
          submitComment();
        });

        document.getElementsByClassName('more-btn')[0].addEventListener('click', function(event) {
          event.preventDefault();
          console.log('click more-btn');
          requestComments();
        });

        document.getElementsByClassName('more-btn')[0].addEventListener('click', function(event) {
          event.preventDefault();
          console.log('click more-btn');
          requestComments();
        });

        firebase.auth().onAuthStateChanged(function(auth) {
          vue1.fbuser = auth;
          vue2.fbuser = auth;
          // console.log(fbuser);
        });

        vue1 = new Vue({
          el: '#comment-lists',
          data: {
            fbuser: fbuser,
            datas: datas
          },
          methods: {
            shareFacebook: function(message) {
              shareFacebook(message);
            },
            deleteComment: function(key) {
              deleteComment(key);
            }
          }
        });

        vue2 = new Vue({
          el: '#top-nav',
          data: {
            fbuser: fbuser
          },
          methods: {
            logout: function() {
              requestLogout();
            },
            loginTwitter: function() {
              loginTwitter();
            },
            loginFacebook: function() {
              loginFacebook();
            }
          }
        })

        requestComments();

        firebase.database().ref().child('comments').orderByKey().limitToLast(requestCount).on('child_added',
          function(data) {
            let val = data.val();
            val['key'] = data.key;
            if ( datas.findIndex(x => x.key == data.key) == -1) {
              datas.unshift(val);
            }
          }
        );
        firebase.database().ref().child('comments').orderByKey().limitToLast(requestCount).on('child_changed',
          function(data) {
            let val = data.val();
            let index = datas.findIndex(x => x.key == data.key);
            if (index != -1) {
              datas[index]['datetime'] = val.datetime;
            }
            vue1.$forceUpdate();
          }
        );
        firebase.database().ref().child('comments').orderByKey().limitToLast(requestCount).on('child_removed',
          function(data) {
            let index = datas.findIndex(x => x.key == data.key);
            if (index != -1) {
              datas.splice(index, 1);
            }
          }
        );
        firebase.database().ref().child('blockUsers').on('child_added',
          function(data) {
            blockUsers.push(data.key);
          }
        );
      }); 

      function deleteComment(key) {
        // let index = datas.findIndex(x => x.key == key);
        // if (index != -1) {        
        // }

        let ref = firebase.database().ref().child('comments').child(key);
        ref.remove().then(function() {
          console.log("Remove succeeded.")
        });
      }

      function shareFacebook(message) {
        FB.ui({
          method: 'share',
          display: 'popup',
          href: 'https://remember-160517.com/',
          hashtag: '#테크페미를_만나고_나의_성공시대_시작됐다',
          quote: message,

        }, function(response){});
      }

      function requestComments() {
        let count = datas.length;
        if (count > 0) {
          let lastKey = datas[count-1].key;
          // let firstKey = datas[0].key;

          firebase.database().ref().child('comments').orderByKey().endAt(lastKey).limitToLast(requestCount+1).once('value').then(
            function(snapshot) {
              processSnapshot(snapshot);
            }
          );  
        } else {
          firebase.database().ref().child('comments').orderByKey().limitToLast(requestCount).once('value').then(
            function(snapshot) {
              processSnapshot(snapshot);            
            }
          );
        }
      }

      function processSnapshot(snapshot) {
        newDatas = [];
        snapshot.forEach(function(childSnapshot) {
          let val = childSnapshot.val();
          val['key'] = childSnapshot.key;
          val['datetime'] = childSnapshot.datetime;
          // console.log(val);
          if ( datas.findIndex(x => x.key == childSnapshot.key) == -1) {
            newDatas.push(val);
          }
        });
        newDatas.reverse();
        newDatas.forEach(function(val) {
          datas.push(val);
        });
      }

      function submitComment() {
        let user = firebase.auth().currentUser;
        if (user == null) {
          showMessage("로그인을 하시면 추모 메세지를 작성할 수 있습니다.");
          return;
        }

        document.getElementsByClassName('comment-submit-btn')[0].disabled = true;
        let comment = document.getElementsByClassName('input-comment')[0].value;

        if (comment.trim() == '') {
          showMessage("추모 메세지를 입력해주세요.");
          return;
        }

        let len = comment.length;
        if (len > 140) {
          showMessage("추모 메세지는 140자 미만으로 작성해주세요.");
          return;  
        }

        // 12345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890
        // 한둘셋넷다여칠팔구십한둘셋넷다여칠팔구십한둘셋넷다여칠팔구십한둘셋넷다여칠팔구십한둘셋넷다여칠팔구십한둘셋넷다여칠팔구십한둘셋넷다여칠팔구십한둘셋넷다여칠팔구십한둘셋넷다여칠팔구십한둘셋넷다여칠팔구십한둘셋넷다여칠팔구십한둘셋넷다여칠팔구십한둘셋넷다여칠팔구십한둘셋넷다여칠팔구십
        let uid = user.uid;
        if (blockUsers.findIndex(x => x == uid) != -1) {
          showMessage("추모 메세지를 작성할 수 없습니다. 자세한 사항은 아래 메일로 문의바랍니다.");
          return;  
        }
          
        // console.log(comment);
        let object = {
          uid : user.uid,
          username : user.displayName,
          userPhotoUrl : user.photoURL,
          comment : comment,
        };

        // Get a key for a new Post.
        var newPostKey = firebase.database().ref().child('comments').push().key;

        var updates = {};
        updates['/comments/' + newPostKey] = object;

        firebase.database().ref().update(updates, function() {
          document.getElementsByClassName('comment-submit-btn')[0].disabled = false;
          document.getElementsByClassName('input-comment')[0].value = '';

          showMessage("추모 메세지가 등록 되었습니다.", true);
        }).catch(function(error) {
          // Handle Errors here.
          var errorCode = error.code;
          var errorMessage = error.message;
          // The email of the user's account used.
          var email = error.email;
          // The firebase.auth.AuthCredential type that was used.
          var credential = error.credential;
          // ...

          showMessage("추모 메세지를 작성할 수 없습니다.  잠시 후 다시 시도하시거나 메일로 문의 바랍니다.");
        });;
      }

      function requestLogout() {
        firebase.auth().signOut();
      }

      function loginFacebook() {
        var provider = new firebase.auth.FacebookAuthProvider();
        provider.addScope('user_birthday');
        provider.setCustomParameters({
          'display': 'popup'
        });

        firebase.auth().signInWithPopup(provider).then(function(result) {
          // This gives you a Facebook Access Token. You can use it to access the Facebook API.
          var token = result.credential.accessToken;
          // The signed-in user info.
          var user = result.user;
          // ...
          console.log('success');

        }).catch(function(error) {
          // Handle Errors here.
          var errorCode = error.code;
          var errorMessage = error.message;
          // The email of the user's account used.
          var email = error.email;
          // The firebase.auth.AuthCredential type that was used.
          var credential = error.credential;
          // ...

          console.log('error');
          showMessage("로그인을 할 수 없니다. 잠시 후 다시 시도하시거나 메일로 문의 바랍니다.");
        });
      }

      function loginTwitter() {
        var provider = new firebase.auth.TwitterAuthProvider();
        provider.setCustomParameters({
          'lang': 'kr'
        });

        firebase.auth().signInWithPopup(provider).then(function(result) {
          // This gives you a the Twitter OAuth 1.0 Access Token and Secret.
          // You can use these server side with your app's credentials to access the Twitter API.
          var token = result.credential.accessToken;
          var secret = result.credential.secret;
          // The signed-in user info.
          var user = result.user;
          // ...
          console.log('twitter success');

        }).catch(function(error) {
          // Handle Errors here.
          var errorCode = error.code;
          var errorMessage = error.message;
          // The email of the user's account used.
          var email = error.email;
          // The firebase.auth.AuthCredential type that was used.
          var credential = error.credential;
          // ...
          console.log('twitter error');
          showMessage("로그인을 할 수 없니다. 잠시 후 다시 시도하시거나 메일로 문의 바랍니다.");
        });
        //*/
      }

      function showMessage(message, autoHide = false) {
        if (autoHide) {
          hideMessage();
          var result = document.getElementsByClassName('submit-result')[0];
          result.innerHTML = message;
          fadeIn(result);
          setTimeout(function() {
            fadeOut(result);
          }, 1300);
        }
        else {
          var result = document.getElementsByClassName('submit-result-fail')[0];
          var messageDiv = document.getElementsByClassName('result-fail-message')[0];
          messageDiv.innerHTML = message;
          fadeIn(result);
        }
      }

      function hideMessage() {
        var result = document.getElementsByClassName('submit-result-fail')[0];
        fadeOut(result);
      }

      // fade out
      function fadeOut(el) {
        var op = 1;
        var timer = setInterval(function () {
          if (op <= 0.1){
            clearInterval(timer);
            el.style.display = 'none';
          }
          el.style.opacity = op;
          op -= op * 0.1;
        }, 10);
      }

      // fade in
      function fadeIn(el) {
        var op = 0;
        el.style.opacity = op;
        el.style.display = '';
        
        var timer = setInterval(function () {
          if (op >= 1.0){
            clearInterval(timer);
          }
          el.style.opacity = op;
          op = op + 0.1;
        }, 30);
      }

    </script>
  </body>
</html>
